<!doctype html><html lang=en-us><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Proxmox notes // rowstu.net</title><link rel=stylesheet href=/assets/shared-theme.css><style>.markdown-content{max-width:900px;margin:0 auto;line-height:1.7}.markdown-content h1{font-size:2.5rem;margin-bottom:1rem;color:var(--accent-teal);border-bottom:2px solid var(--border);padding-bottom:.5rem}.markdown-content h2{font-size:2rem;margin-top:2rem;margin-bottom:1rem;color:var(--accent-orange)}.markdown-content h3{font-size:1.5rem;margin-top:1.5rem;margin-bottom:.75rem;color:var(--text-primary)}.markdown-content p{margin-bottom:1rem}.markdown-content code{background:var(--bg-light);padding:.2rem .4rem;border-radius:3px;font-family:jetbrains mono,monospace;font-size:.9em}.markdown-content pre{background:var(--bg-light);padding:1rem;border-radius:6px;overflow-x:auto;margin-bottom:1rem}.markdown-content pre code{background:0 0;padding:0}.markdown-content a{color:var(--accent-teal);text-decoration:none}.markdown-content a:hover{text-decoration:underline}.markdown-content ul,.markdown-content ol{margin-bottom:1rem;padding-left:2rem}.markdown-content li{margin-bottom:.5rem}.markdown-content blockquote{border-left:4px solid var(--accent-teal);padding-left:1rem;margin:1rem 0;color:var(--text-secondary);font-style:italic}.markdown-content table{width:100%;border-collapse:collapse;margin-bottom:1rem}.markdown-content th,.markdown-content td{border:1px solid var(--border);padding:.75rem;text-align:left}.markdown-content th{background:var(--bg-light);font-weight:600}.breadcrumb{padding:1rem 0;color:var(--text-secondary);font-size:.95rem}.breadcrumb a{color:var(--accent-teal);text-decoration:none}.breadcrumb a:hover{text-decoration:underline}</style></head><body><div class=app-header><h1 class=app-title>Proxmox notes</h1></div><div class=container><div class=breadcrumb><a href=/>Home</a> / <a href=/browse/>Browse</a>/ <a href=/proxmoxnotes/>Proxmoxnotes</a></div><div class="card markdown-content"><p><strong>Proxmox VE</strong> is an open-source virtualization platform based on <strong>Debian Linux</strong> that integrates:</p><ul><li><strong>KVM</strong> – full virtual machines (Windows, Linux, BSD)</li><li><strong>LXC</strong> – lightweight system containers</li><li><strong>Web-based management UI</strong></li><li><strong>Software-defined storage</strong> (ZFS, Ceph, LVM)</li><li><strong>Built-in backup, clustering, and HA</strong></li></ul><h3 id=key-strengths>Key Strengths</h3><ul><li>Free and open-source (paid support optional)</li><li>Excellent web UI</li><li>ZFS and snapshot support</li><li>Native clustering without external tooling</li><li>Ideal for homelabs, SMEs, and edge environments</li></ul><hr><h2 id=installation-and-configuration>Installation and Configuration</h2><h3 id=hardware-requirements-realistic-minimums>Hardware Requirements (Realistic Minimums)</h3><p><strong>Minimum</strong></p><ul><li>64-bit CPU with VT-x / AMD-V</li><li>8 GB RAM (16 GB strongly recommended)</li><li>1 SSD/NVMe (2+ is better for ZFS)</li><li>Static IP (recommended)</li></ul><p><strong>Best Practice</strong></p><ul><li>ECC RAM if using ZFS</li><li>Separate disks for OS and VM storage</li><li>NVMe for VM disks, HDD for backups</li></ul><hr><h3 id=installation--step-by-step>Installation – Step by Step</h3><h4 id=1-download-proxmox-iso>1. Download Proxmox ISO</h4><ul><li>Get the <strong>Proxmox VE ISO Installer</strong></li><li>Write to USB (Ventoy, Rufus, dd)</li></ul><h4 id=2-boot-and-install>2. Boot and Install</h4><ul><li><p>Boot from USB → <em>Install Proxmox VE</em></p></li><li><p>Accept license</p></li><li><p>Select target disk</p><ul><li><strong>Single disk</strong> → ext4 or ZFS (RAID0)</li><li><strong>Multiple disks</strong> → ZFS mirror or RAIDZ (recommended)</li></ul></li></ul><h4 id=3-configure-location--credentials>3. Configure Location & Credentials</h4><ul><li>Country / Timezone / Keyboard</li><li><strong>Root password</strong> (store securely)</li><li>Email address (alerts)</li></ul><h4 id=4-network-configuration>4. Network Configuration</h4><ul><li><p>Assign:</p><ul><li>Management IP</li><li>Gateway</li><li>DNS</li></ul></li><li><p>Use a <strong>static IP</strong></p></li></ul><blockquote><p>⚠️ Do not rely on DHCP for a hypervisor.</p></blockquote><h4 id=5-finish--reboot>5. Finish & Reboot</h4><ul><li><p>Access UI at:</p><pre tabindex=0><code>https://&lt;IP&gt;:8006
</code></pre></li></ul><hr><h3 id=23-initial-post-install-configuration>2.3 Initial Post-Install Configuration</h3><h4 id=remove-enterprise-repository-if-not-subscribed>Remove Enterprise Repository (if not subscribed)</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>sed -i <span style=color:#e6db74>&#39;s/^deb/#deb/&#39;</span> /etc/apt/sources.list.d/pve-enterprise.list
</span></span></code></pre></div><p>Add no-subscription repo:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>echo <span style=color:#e6db74>&#34;deb http://download.proxmox.com/debian/pve bookworm pve-no-subscription&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span>&gt; /etc/apt/sources.list.d/pve-no-subscription.list
</span></span><span style=display:flex><span>apt update <span style=color:#f92672>&amp;&amp;</span> apt upgrade
</span></span></code></pre></div><h4 id=set-hostname-properly>Set Hostname Properly</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>hostnamectl set-hostname pve01.example.local
</span></span></code></pre></div><p>Ensure <code>/etc/hosts</code> contains:</p><pre tabindex=0><code>&lt;IP&gt; pve01.example.local pve01
</code></pre><hr><h2 id=virtual-machine-management>Virtual Machine Management</h2><h3 id=1-vm-vs-container-know-the-difference>1 VM vs Container (Know the Difference)</h3><table><thead><tr><th>Type</th><th>Use Case</th></tr></thead><tbody><tr><td><strong>VM (KVM)</strong></td><td>Windows, mixed OS, full isolation</td></tr><tr><td><strong>LXC</strong></td><td>Linux-only, high density, low overhead</td></tr></tbody></table><p><strong>Rule of Thumb</strong></p><ul><li>Use <strong>LXC</strong> for services (DNS, web, monitoring)</li><li>Use <strong>VMs</strong> for desktops, Windows, appliances</li></ul><hr><h3 id=2-creating-a-virtual-machine>2 Creating a Virtual Machine</h3><ol><li><p>Click <strong>Create VM</strong></p></li><li><p><strong>General</strong></p><ul><li>VM ID (auto)</li><li>Name (descriptive)</li></ul></li><li><p><strong>OS</strong></p><ul><li>Upload ISO to <code>local</code> → ISO Images</li><li>Select ISO</li></ul></li><li><p><strong>System</strong></p><ul><li>BIOS: <code>OVMF (UEFI)</code> (modern OS)</li><li>Machine: <code>q35</code></li><li>Enable QEMU agent (important)</li></ul></li><li><p><strong>Disks</strong></p><ul><li>Storage: <code>local-lvm</code> or ZFS</li><li>Bus: <strong>VirtIO SCSI</strong></li><li>Cache: <code>Write back</code> (UPS recommended)</li></ul></li><li><p><strong>CPU</strong></p><ul><li>Type: <code>host</code></li><li>Cores: start small</li></ul></li><li><p><strong>Memory</strong></p><ul><li>Ballooning: enabled</li><li>Start conservative</li></ul></li><li><p><strong>Network</strong></p><ul><li>Model: <strong>VirtIO</strong></li><li>Bridge: <code>vmbr0</code></li></ul></li></ol><hr><h3 id=3-vm-lifecycle-operations>3 VM Lifecycle Operations</h3><table><thead><tr><th>Action</th><th>How</th></tr></thead><tbody><tr><td>Start</td><td>Web UI → Start</td></tr><tr><td>Stop</td><td>Shutdown (preferred)</td></tr><tr><td>Force stop</td><td>Stop (power off)</td></tr><tr><td>Delete</td><td>Stop → Remove</td></tr></tbody></table><blockquote><p>Always install <strong>qemu-guest-agent</strong> inside the VM.</p></blockquote><hr><h3 id=4-best-practices--resource-allocation>4 Best Practices – Resource Allocation</h3><h4 id=cpu>CPU</h4><ul><li>Do <strong>not overcommit aggressively</strong></li><li>Avoid pinning unless needed</li><li>Use <code>host</code> CPU type</li></ul><h4 id=memory>Memory</h4><ul><li>Enable ballooning</li><li>Leave headroom for host</li><li>ZFS needs RAM (1 GB per TB rule is conservative but useful)</li></ul><h4 id=storage>Storage</h4><ul><li>Prefer VirtIO</li><li>Avoid IDE/SATA unless required</li><li>Thin provisioning is fine, but monitor usage</li></ul><hr><h2 id=networking-setup>Networking Setup</h2><h3 id=1-default-proxmox-networking>1 Default Proxmox Networking</h3><p>Proxmox uses <strong>Linux bridges</strong>.</p><p>Default:</p><ul><li><code>vmbr0</code> → physical NIC → VMs</li></ul><p>Example:</p><pre tabindex=0><code>vmbr0
 ├── eno1 (physical NIC)
 ├── host IP
 └── VMs
</code></pre><hr><h3 id=2-common-networking-configurations>2 Common Networking Configurations</h3><h4 id=single-nic-simple>Single NIC (Simple)</h4><ul><li>Management + VMs on same bridge</li></ul><h4 id=dual-nic-recommended>Dual NIC (Recommended)</h4><ul><li>NIC 1: Management</li><li>NIC 2: VM traffic</li></ul><h4 id=vlan-aware-bridge>VLAN-aware Bridge</h4><ul><li>Enable VLAN filtering on bridge</li><li>Tag VMs per VLAN</li></ul><hr><h3 id=3-network-security-best-practices>3 Network Security Best Practices</h3><ul><li><p><strong>Firewall enabled</strong> (Datacenter → Firewall)</p></li><li><p>Use:</p><ul><li>Datacenter rules</li><li>Node rules</li><li>VM-specific rules</li></ul></li><li><p>Restrict access to port <strong>8006</strong></p></li><li><p>Use VPN for remote management</p></li><li><p>Disable root SSH password login</p></li></ul><hr><h2 id=storage-management>Storage Management</h2><h3 id=1-storage-types-overview>1 Storage Types Overview</h3><table><thead><tr><th>Storage</th><th>Use Case</th></tr></thead><tbody><tr><td><code>local</code></td><td>ISOs, backups</td></tr><tr><td><code>local-lvm</code></td><td>VM disks</td></tr><tr><td>ZFS</td><td>Snapshots, integrity</td></tr><tr><td>NFS</td><td>Shared storage</td></tr><tr><td>iSCSI</td><td>Enterprise SAN</td></tr><tr><td>Ceph</td><td>Distributed clusters</td></tr></tbody></table><hr><h3 id=2-zfs-best-practices>2 ZFS Best Practices</h3><ul><li>Use mirrors over RAIDZ for VM workloads</li><li>Enable compression (<code>lz4</code>)</li><li>Avoid deduplication</li><li>Monitor ARC size</li></ul><p>ZFS tuning example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>echo <span style=color:#e6db74>&#34;options zfs zfs_arc_max=8589934592&#34;</span> &gt; /etc/modprobe.d/zfs.conf
</span></span></code></pre></div><hr><h3 id=3-storage-performance-tips>3 Storage Performance Tips</h3><ul><li>Use VirtIO SCSI + multi-queue</li><li>Separate OS and VM disks</li><li>NVMe > SSD > HDD</li><li>Enable TRIM on SSDs</li><li>Monitor I/O wait (<code>iostat</code>, UI graphs)</li></ul><hr><h2 id=backup-and-recovery>Backup and Recovery</h2><h3 id=1-backup-types>1 Backup Types</h3><ul><li><strong>Snapshot</strong> (fast, same storage)</li><li><strong>Suspend</strong> (memory included)</li><li><strong>Stop</strong> (most consistent)</li></ul><p><strong>Recommended</strong>: Snapshot with QEMU agent</p><hr><h3 id=2-configuring-backups>2 Configuring Backups</h3><ol><li><p>Datacenter → Backup</p></li><li><p>Schedule:</p><ul><li>Daily</li><li>Off-peak hours</li></ul></li><li><p>Storage:</p><ul><li>Separate disk or NFS</li></ul></li><li><p>Retention:</p><ul><li>7–14 backups</li></ul></li></ol><hr><h3 id=3-restoring-vms>3 Restoring VMs</h3><ul><li><p>Select backup</p></li><li><p>Restore to:</p><ul><li>Same node</li><li>Different node</li></ul></li><li><p>Can restore disk-only</p></li></ul><hr><h3 id=4-disaster-recovery-best-practices>4 Disaster Recovery Best Practices</h3><ul><li><p>Backups <strong>off the host</strong></p></li><li><p>Test restores quarterly</p></li><li><p>Document:</p><ul><li>Network layout</li><li>Storage layout</li><li>VM priorities</li></ul></li><li><p>UPS + graceful shutdown</p></li></ul><hr><h2 id=performance-monitoring-and-optimization>Performance Monitoring and Optimization</h2><h3 id=built-in-tools>Built-in Tools</h3><ul><li>Web UI graphs (CPU, RAM, Disk, Network)</li><li>Task history</li><li>ZFS status</li></ul><p>CLI tools:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>htop
</span></span><span style=display:flex><span>iostat
</span></span><span style=display:flex><span>zpool status
</span></span><span style=display:flex><span>pvesh
</span></span></code></pre></div><hr><h3 id=optimization-tips>Optimization Tips</h3><ul><li>Install QEMU agent in all VMs</li><li>Use VirtIO everywhere</li><li>Avoid overcommitting RAM</li><li>Disable unused services</li><li>Keep host updated</li><li>Pin critical workloads only when necessary</li></ul><hr><h2 id=common-troubleshooting-tips>Common Troubleshooting Tips</h2><h3 id=vm-wont-start>VM Won’t Start</h3><ul><li>Check storage availability</li><li>Check ISO path</li><li>Check logs:</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>journalctl -xe
</span></span></code></pre></div><h3 id=no-network-in-vm>No Network in VM</h3><ul><li>Ensure bridge is correct</li><li>Use VirtIO drivers (Windows!)</li><li>Check firewall rules</li></ul><h3 id=high-io-wait>High I/O Wait</h3><ul><li>Storage bottleneck</li><li>ZFS ARC too large</li><li>Too many VMs on one disk</li></ul><h3 id=web-ui-slow>Web UI Slow</h3><ul><li>DNS issues</li><li>Browser cache</li><li>Host under memory pressure</li></ul><hr><h2 id=additional-resources>Additional Resources</h2><h3 id=official>Official</h3><ul><li>Proxmox Documentation</li><li>Proxmox Wiki</li><li>Proxmox Forum</li></ul><h3 id=community>Community</h3><ul><li>r/Proxmox (Reddit)</li><li>Homelab Discords</li><li>YouTube channels (TechnoTim, LearnLinuxTV)</li></ul><h3 id=tools>Tools</h3><ul><li>Proxmox Backup Server (PBS)</li><li>Ansible + Proxmox modules</li><li>Terraform provider for Proxmox</li></ul></div></div><script src=/assets/shared-nav.js></script></body></html>