<!doctype html><html lang=en-us><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>systemd - Notes, Procedures, and Best Practices // rowstu.net</title><link rel=stylesheet href=/assets/shared-theme.css><style>.markdown-content{max-width:900px;margin:0 auto;line-height:1.7}.markdown-content h1{font-size:2.5rem;margin-bottom:1rem;color:var(--accent-teal);border-bottom:2px solid var(--border);padding-bottom:.5rem}.markdown-content h2{font-size:2rem;margin-top:2rem;margin-bottom:1rem;color:var(--accent-orange)}.markdown-content h3{font-size:1.5rem;margin-top:1.5rem;margin-bottom:.75rem;color:var(--text-primary)}.markdown-content p{margin-bottom:1rem}.markdown-content code{background:var(--bg-light);padding:.2rem .4rem;border-radius:3px;font-family:jetbrains mono,monospace;font-size:.9em}.markdown-content pre{background:var(--bg-light);padding:1rem;border-radius:6px;overflow-x:auto;margin-bottom:1rem}.markdown-content pre code{background:0 0;padding:0}.markdown-content a{color:var(--accent-teal);text-decoration:none}.markdown-content a:hover{text-decoration:underline}.markdown-content ul,.markdown-content ol{margin-bottom:1rem;padding-left:2rem}.markdown-content li{margin-bottom:.5rem}.markdown-content blockquote{border-left:4px solid var(--accent-teal);padding-left:1rem;margin:1rem 0;color:var(--text-secondary);font-style:italic}.markdown-content table{width:100%;border-collapse:collapse;margin-bottom:1rem}.markdown-content th,.markdown-content td{border:1px solid var(--border);padding:.75rem;text-align:left}.markdown-content th{background:var(--bg-light);font-weight:600}.breadcrumb{padding:1rem 0;color:var(--text-secondary);font-size:.95rem}.breadcrumb a{color:var(--accent-teal);text-decoration:none}.breadcrumb a:hover{text-decoration:underline}</style></head><body><div class=app-header><h1 class=app-title>systemd - Notes, Procedures, and Best Practices</h1></div><div class=container><div class=breadcrumb><a href=/>Home</a> / <a href=/browse/>Browse</a>/ <a href=/linuxsystemd/>Linuxsystemd</a></div><div class="card markdown-content"><h2 id=1-introduction-to-systemd>1. Introduction to systemd</h2><h3 id=what-systemd-is>What systemd Is</h3><p><strong>systemd</strong> is the init system and service manager used by most modern Linux distributions (RHEL, Fedora, Debian, Ubuntu, Arch, SUSE).</p><p>It is responsible for:</p><ul><li>Bootstrapping the system (PID 1)</li><li>Starting and stopping services</li><li>Managing dependencies</li><li>Logging (journald)</li><li>Resource control (cgroups)</li><li>Timers, sockets, mounts, devices, and more</li></ul><h3 id=purpose>Purpose</h3><p>systemd replaces fragmented tooling with a <strong>unified, dependency-aware, event-driven framework</strong>.</p><h3 id=how-systemd-differs-from-other-init-systems>How systemd Differs from Other Init Systems</h3><table><thead><tr><th>Feature</th><th>sysvinit</th><th>Upstart</th><th>systemd</th></tr></thead><tbody><tr><td>Dependency handling</td><td>Manual</td><td>Event-based</td><td>Automatic, declarative</td></tr><tr><td>Parallel startup</td><td>❌</td><td>⚠️</td><td>✅</td></tr><tr><td>Service monitoring</td><td>❌</td><td>⚠️</td><td>✅</td></tr><tr><td>Logging</td><td>syslog</td><td>syslog</td><td>journald</td></tr><tr><td>Resource control</td><td>❌</td><td>❌</td><td>cgroups</td></tr><tr><td>Socket activation</td><td>❌</td><td>❌</td><td>✅</td></tr></tbody></table><p>Key difference: <strong>systemd manages <em>state</em></strong>, not just process start/stop.</p><hr><h2 id=2-basic-systemd-commands>2. Basic systemd Commands</h2><h3 id=service-control-systemctl>Service Control (systemctl)</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>systemctl start nginx
</span></span><span style=display:flex><span>systemctl stop nginx
</span></span><span style=display:flex><span>systemctl restart nginx
</span></span><span style=display:flex><span>systemctl reload nginx
</span></span></code></pre></div><h3 id=enable--disable-at-boot>Enable / Disable at Boot</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>systemctl enable nginx
</span></span><span style=display:flex><span>systemctl disable nginx
</span></span></code></pre></div><p>Enable + start immediately:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>systemctl enable --now nginx
</span></span></code></pre></div><h3 id=status-and-inspection>Status and Inspection</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>systemctl status nginx
</span></span><span style=display:flex><span>systemctl is-active nginx
</span></span><span style=display:flex><span>systemctl is-enabled nginx
</span></span></code></pre></div><h3 id=list-units>List Units</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>systemctl list-units
</span></span><span style=display:flex><span>systemctl list-unit-files
</span></span></code></pre></div><p>Filter:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>systemctl list-units --type<span style=color:#f92672>=</span>service
</span></span></code></pre></div><hr><h2 id=3-unit-files>3. Unit Files</h2><h3 id=what-is-a-unit>What Is a Unit?</h3><p>A <strong>unit</strong> is a configuration file describing something systemd manages.</p><h3 id=common-unit-types>Common Unit Types</h3><table><thead><tr><th>Type</th><th>Purpose</th></tr></thead><tbody><tr><td><code>.service</code></td><td>Services / daemons</td></tr><tr><td><code>.socket</code></td><td>Socket activation</td></tr><tr><td><code>.target</code></td><td>Group of units (runlevels)</td></tr><tr><td><code>.timer</code></td><td>Scheduled tasks</td></tr><tr><td><code>.mount</code></td><td>Mount points</td></tr><tr><td><code>.device</code></td><td>Hardware devices</td></tr><tr><td><code>.path</code></td><td>Path-based activation</td></tr><tr><td><code>.slice</code></td><td>Resource grouping</td></tr></tbody></table><hr><h3 id=unit-file-locations-priority-order>Unit File Locations (Priority Order)</h3><ol><li><code>/etc/systemd/system/</code> (admin overrides)</li><li><code>/run/systemd/system/</code> (runtime)</li><li><code>/usr/lib/systemd/system/</code> or <code>/lib/systemd/system/</code> (package defaults)</li></ol><hr><h3 id=basic-unit-file-structure>Basic Unit File Structure</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-ini data-lang=ini><span style=display:flex><span><span style=color:#66d9ef>[Unit]</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Description</span><span style=color:#f92672>=</span><span style=color:#e6db74>My Example Service</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>After</span><span style=color:#f92672>=</span><span style=color:#e6db74>network.target</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>[Service]</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>ExecStart</span><span style=color:#f92672>=</span><span style=color:#e6db74>/usr/local/bin/myapp</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Restart</span><span style=color:#f92672>=</span><span style=color:#e6db74>on-failure</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>User</span><span style=color:#f92672>=</span><span style=color:#e6db74>myuser</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>[Install]</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>WantedBy</span><span style=color:#f92672>=</span><span style=color:#e6db74>multi-user.target</span>
</span></span></code></pre></div><hr><h3 id=key-sections>Key Sections</h3><h4 id=unit><code>[Unit]</code></h4><ul><li><code>Description=</code></li><li><code>After=</code>, <code>Before=</code></li><li><code>Requires=</code>, <code>Wants=</code></li><li><code>ConditionPathExists=</code></li></ul><h4 id=service><code>[Service]</code></h4><ul><li><code>ExecStart=</code></li><li><code>ExecStop=</code></li><li><code>Restart=</code></li><li><code>Type=simple|forking|oneshot|notify</code></li><li><code>User=</code>, <code>Group=</code></li><li><code>Environment=</code></li></ul><h4 id=install><code>[Install]</code></h4><ul><li><code>WantedBy=</code></li><li><code>RequiredBy=</code></li></ul><hr><h3 id=editing-units-safely-overrides>Editing Units Safely (Overrides)</h3><p><strong>Never edit vendor units directly.</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>systemctl edit nginx
</span></span></code></pre></div><p>Creates:</p><pre tabindex=0><code>/etc/systemd/system/nginx.service.d/override.conf
</code></pre><p>Example override:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-ini data-lang=ini><span style=display:flex><span><span style=color:#66d9ef>[Service]</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Restart</span><span style=color:#f92672>=</span><span style=color:#e6db74>always</span>
</span></span></code></pre></div><p>Reload after changes:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>systemctl daemon-reexec
</span></span></code></pre></div><hr><h2 id=4-service-management-best-practices>4. Service Management Best Practices</h2><h3 id=choose-the-correct-type>Choose the Correct <code>Type=</code></h3><table><thead><tr><th>Type</th><th>When to Use</th></tr></thead><tbody><tr><td><code>simple</code></td><td>Default, foreground process</td></tr><tr><td><code>forking</code></td><td>Legacy daemons</td></tr><tr><td><code>oneshot</code></td><td>Short-lived tasks</td></tr><tr><td><code>notify</code></td><td>systemd-aware daemons</td></tr></tbody></table><h3 id=restart-policy>Restart Policy</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-ini data-lang=ini><span style=display:flex><span><span style=color:#a6e22e>Restart</span><span style=color:#f92672>=</span><span style=color:#e6db74>on-failure</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>RestartSec</span><span style=color:#f92672>=</span><span style=color:#e6db74>5</span>
</span></span></code></pre></div><p>Avoid:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-ini data-lang=ini><span style=display:flex><span><span style=color:#a6e22e>Restart</span><span style=color:#f92672>=</span><span style=color:#e6db74>always</span>
</span></span></code></pre></div><p>…unless you understand failure loops.</p><hr><h3 id=dependency-control>Dependency Control</h3><p>Bad:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-ini data-lang=ini><span style=display:flex><span><span style=color:#a6e22e>After</span><span style=color:#f92672>=</span><span style=color:#e6db74>network.target</span>
</span></span></code></pre></div><p>Better:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-ini data-lang=ini><span style=display:flex><span><span style=color:#a6e22e>After</span><span style=color:#f92672>=</span><span style=color:#e6db74>network-online.target</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Wants</span><span style=color:#f92672>=</span><span style=color:#e6db74>network-online.target</span>
</span></span></code></pre></div><hr><h3 id=common-issues--fixes>Common Issues & Fixes</h3><table><thead><tr><th>Problem</th><th>Fix</th></tr></thead><tbody><tr><td>Service exits immediately</td><td>Wrong <code>Type=</code></td></tr><tr><td>Starts before network</td><td>Use <code>network-online.target</code></td></tr><tr><td>Env vars missing</td><td>Use <code>Environment=</code> or <code>EnvironmentFile=</code></td></tr><tr><td>Changes ignored</td><td>Run <code>systemctl daemon-reload</code></td></tr></tbody></table><hr><h2 id=5-timers-and-scheduling>5. Timers and Scheduling</h2><h3 id=why-systemd-timers--cron>Why systemd Timers > cron</h3><ul><li>Dependency-aware</li><li>Missed-job handling</li><li>Unified logging</li><li>No separate daemon</li></ul><hr><h3 id=timer-example-daily-job>Timer Example (Daily Job)</h3><p><strong>Service unit:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-ini data-lang=ini><span style=display:flex><span><span style=color:#66d9ef>[Service]</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Type</span><span style=color:#f92672>=</span><span style=color:#e6db74>oneshot</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>ExecStart</span><span style=color:#f92672>=</span><span style=color:#e6db74>/usr/local/bin/backup.sh</span>
</span></span></code></pre></div><p><strong>Timer unit:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-ini data-lang=ini><span style=display:flex><span><span style=color:#66d9ef>[Timer]</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>OnCalendar</span><span style=color:#f92672>=</span><span style=color:#e6db74>daily</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Persistent</span><span style=color:#f92672>=</span><span style=color:#e6db74>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>[Install]</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>WantedBy</span><span style=color:#f92672>=</span><span style=color:#e6db74>timers.target</span>
</span></span></code></pre></div><p>Enable:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>systemctl enable --now backup.timer
</span></span></code></pre></div><p>List timers:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>systemctl list-timers
</span></span></code></pre></div><hr><h3 id=common-oncalendar-values>Common <code>OnCalendar</code> Values</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-text data-lang=text><span style=display:flex><span>hourly
</span></span><span style=display:flex><span>daily
</span></span><span style=display:flex><span>weekly
</span></span><span style=display:flex><span>Mon *-*-* 02:00:00
</span></span></code></pre></div><hr><h2 id=6-logs-and-debugging>6. Logs and Debugging</h2><h3 id=journalctl-basics>journalctl Basics</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>journalctl
</span></span><span style=display:flex><span>journalctl -u nginx
</span></span><span style=display:flex><span>journalctl -u nginx -f
</span></span></code></pre></div><p>Boot-specific:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>journalctl -b
</span></span><span style=display:flex><span>journalctl -b -1
</span></span></code></pre></div><p>Time range:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>journalctl --since <span style=color:#e6db74>&#34;1 hour ago&#34;</span>
</span></span></code></pre></div><hr><h3 id=debugging-a-failing-service>Debugging a Failing Service</h3><ol><li>Check status:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>systemctl status myservice
</span></span></code></pre></div><ol start=2><li>View logs:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>journalctl -u myservice --no-pager
</span></span></code></pre></div><ol start=3><li>Validate unit:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>systemd-analyze verify myservice.service
</span></span></code></pre></div><ol start=4><li>Test ExecStart manually</li></ol><hr><h3 id=increase-logging>Increase Logging</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-ini data-lang=ini><span style=display:flex><span><span style=color:#66d9ef>[Service]</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Environment</span><span style=color:#f92672>=</span><span style=color:#e6db74>SYSTEMD_LOG_LEVEL=debug</span>
</span></span></code></pre></div><hr><h2 id=7-customization-and-optimization>7. Customization and Optimization</h2><h3 id=resource-management-cgroups>Resource Management (cgroups)</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-ini data-lang=ini><span style=display:flex><span><span style=color:#66d9ef>[Service]</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>CPUQuota</span><span style=color:#f92672>=</span><span style=color:#e6db74>50%</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>MemoryMax</span><span style=color:#f92672>=</span><span style=color:#e6db74>512M</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>IOWeight</span><span style=color:#f92672>=</span><span style=color:#e6db74>200</span>
</span></span></code></pre></div><h3 id=slices>Slices</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>systemctl set-property myservice.service MemoryMax<span style=color:#f92672>=</span>1G
</span></span></code></pre></div><h3 id=faster-boot-analysis>Faster Boot Analysis</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>systemd-analyze
</span></span><span style=display:flex><span>systemd-analyze blame
</span></span><span style=display:flex><span>systemd-analyze critical-chain
</span></span></code></pre></div><hr><h3 id=masking-services>Masking Services</h3><p>Completely disable:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>systemctl mask bluetooth.service
</span></span></code></pre></div><p>Unmask:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>systemctl unmask bluetooth.service
</span></span></code></pre></div><hr><h2 id=8-security-practices>8. Security Practices</h2><h3 id=run-as-non-root>Run as Non-Root</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-ini data-lang=ini><span style=display:flex><span><span style=color:#66d9ef>[Service]</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>User</span><span style=color:#f92672>=</span><span style=color:#e6db74>appuser</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Group</span><span style=color:#f92672>=</span><span style=color:#e6db74>appgroup</span>
</span></span></code></pre></div><hr><h3 id=filesystem-protections>Filesystem Protections</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-ini data-lang=ini><span style=display:flex><span><span style=color:#a6e22e>ProtectSystem</span><span style=color:#f92672>=</span><span style=color:#e6db74>strict</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>ProtectHome</span><span style=color:#f92672>=</span><span style=color:#e6db74>true</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>ReadOnlyPaths</span><span style=color:#f92672>=</span><span style=color:#e6db74>/</span>
</span></span></code></pre></div><hr><h3 id=capability-bounding>Capability Bounding</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-ini data-lang=ini><span style=display:flex><span><span style=color:#a6e22e>CapabilityBoundingSet</span><span style=color:#f92672>=</span><span style=color:#e6db74>CAP_NET_BIND_SERVICE</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>NoNewPrivileges</span><span style=color:#f92672>=</span><span style=color:#e6db74>true</span>
</span></span></code></pre></div><hr><h3 id=namespace-isolation>Namespace Isolation</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-ini data-lang=ini><span style=display:flex><span><span style=color:#a6e22e>PrivateTmp</span><span style=color:#f92672>=</span><span style=color:#e6db74>true</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>PrivateDevices</span><span style=color:#f92672>=</span><span style=color:#e6db74>true</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>PrivateUsers</span><span style=color:#f92672>=</span><span style=color:#e6db74>true</span>
</span></span></code></pre></div><hr><h3 id=full-hardened-example>Full Hardened Example</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-ini data-lang=ini><span style=display:flex><span><span style=color:#66d9ef>[Service]</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>ExecStart</span><span style=color:#f92672>=</span><span style=color:#e6db74>/usr/bin/myapp</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>User</span><span style=color:#f92672>=</span><span style=color:#e6db74>myapp</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>NoNewPrivileges</span><span style=color:#f92672>=</span><span style=color:#e6db74>true</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>PrivateTmp</span><span style=color:#f92672>=</span><span style=color:#e6db74>true</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>ProtectSystem</span><span style=color:#f92672>=</span><span style=color:#e6db74>strict</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>ProtectHome</span><span style=color:#f92672>=</span><span style=color:#e6db74>true</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>CapabilityBoundingSet</span><span style=color:#f92672>=</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>MemoryMax</span><span style=color:#f92672>=</span><span style=color:#e6db74>256M</span>
</span></span></code></pre></div><hr><h2 id=9-recommended-workflow-real-world>9. Recommended Workflow (Real-World)</h2><ol><li>Install package</li><li>Inspect vendor unit</li><li>Create override with <code>systemctl edit</code></li><li>Apply security & resource limits</li><li>Enable with <code>--now</code></li><li>Monitor via <code>journalctl</code></li><li>Periodically audit with <code>systemd-analyze</code></li></ol></div></div><script src=/assets/shared-nav.js></script></body></html>