<!doctype html><html lang=en-us><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>sed & awk notes // rowstu.net</title><link rel=stylesheet href=/assets/shared-theme.css><style>.markdown-content{max-width:900px;margin:0 auto;line-height:1.7}.markdown-content h1{font-size:2.5rem;margin-bottom:1rem;color:var(--accent-teal);border-bottom:2px solid var(--border);padding-bottom:.5rem}.markdown-content h2{font-size:2rem;margin-top:2rem;margin-bottom:1rem;color:var(--accent-orange)}.markdown-content h3{font-size:1.5rem;margin-top:1.5rem;margin-bottom:.75rem;color:var(--text-primary)}.markdown-content p{margin-bottom:1rem}.markdown-content code{background:var(--bg-light);padding:.2rem .4rem;border-radius:3px;font-family:jetbrains mono,monospace;font-size:.9em}.markdown-content pre{background:var(--bg-light);padding:1rem;border-radius:6px;overflow-x:auto;margin-bottom:1rem}.markdown-content pre code{background:0 0;padding:0}.markdown-content a{color:var(--accent-teal);text-decoration:none}.markdown-content a:hover{text-decoration:underline}.markdown-content ul,.markdown-content ol{margin-bottom:1rem;padding-left:2rem}.markdown-content li{margin-bottom:.5rem}.markdown-content blockquote{border-left:4px solid var(--accent-teal);padding-left:1rem;margin:1rem 0;color:var(--text-secondary);font-style:italic}.markdown-content table{width:100%;border-collapse:collapse;margin-bottom:1rem}.markdown-content th,.markdown-content td{border:1px solid var(--border);padding:.75rem;text-align:left}.markdown-content th{background:var(--bg-light);font-weight:600}.breadcrumb{padding:1rem 0;color:var(--text-secondary);font-size:.95rem}.breadcrumb a{color:var(--accent-teal);text-decoration:none}.breadcrumb a:hover{text-decoration:underline}</style></head><body><div class=app-header><h1 class=app-title>sed & awk notes</h1></div><div class=container><div class=breadcrumb><a href=/>Home</a> / <a href=/browse/>Browse</a>/ <a href=/linuxsed-awk/>Linuxsed Awk</a></div><div class="card markdown-content"><h1 id=1-introduction-to-sed--awk><strong>1. Introduction to sed & awk</strong></h1><h2 id=11-what-is><strong>1.1 What is <code>sed</code>?</strong></h2><p><code>sed</code> (Stream EDitor) is a <strong>line-based text processor</strong> that reads input line-by-line, applies operations, and outputs the result.
It’s ideal for <strong>simple text transformations</strong>, like substitutions and deletions.</p><p><strong>Typical uses:</strong></p><ul><li>Find-and-replace text</li><li>Delete lines</li><li>Insert lines</li><li>Basic file editing in pipelines</li></ul><hr><h2 id=12-what-is><strong>1.2 What is <code>awk</code>?</strong></h2><p><code>awk</code> is a <strong>pattern scanning and processing language</strong>.
It is used for <strong>structured text</strong>, especially <strong>column-based data</strong>.</p><p><strong>Typical uses:</strong></p><ul><li>Extract columns</li><li>Perform calculations</li><li>Generate reports</li><li>Parse logs and CSV files</li></ul><hr><h2 id=13-key-differences><strong>1.3 Key Differences</strong></h2><table><thead><tr><th>Feature</th><th>sed</th><th>awk</th></tr></thead><tbody><tr><td>Primary use</td><td>Stream editing</td><td>Data extraction & reporting</td></tr><tr><td>Ideal for</td><td>Line-based transformations</td><td>Column-based processing</td></tr><tr><td>Complexity</td><td>Simple</td><td>Powerful scripting language</td></tr><tr><td>Output</td><td>Modified text</td><td>Structured output and calculations</td></tr></tbody></table><hr><h1 id=2-basic-syntax><strong>2. Basic Syntax</strong></h1><hr><h2 id=21-sed-basic-syntax><strong>2.1 sed Basic Syntax</strong></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>sed <span style=color:#e6db74>&#39;COMMAND&#39;</span> file
</span></span></code></pre></div><h3 id=common-patterns><strong>Common patterns</strong></h3><ul><li><code>s/old/new/</code> → substitute</li><li><code>d</code> → delete line</li><li><code>p</code> → print line</li><li><code>i</code> → insert line</li><li><code>a</code> → append line</li></ul><h3 id=example><strong>Example</strong></h3><p>Replace “foo” with “bar”:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>sed <span style=color:#e6db74>&#39;s/foo/bar/g&#39;</span> file.txt
</span></span></code></pre></div><p>Delete line 3:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>sed <span style=color:#e6db74>&#39;3d&#39;</span> file.txt
</span></span></code></pre></div><hr><h2 id=22-awk-basic-syntax><strong>2.2 awk Basic Syntax</strong></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>awk <span style=color:#e6db74>&#39;pattern { action }&#39;</span> file
</span></span></code></pre></div><h3 id=key-concepts><strong>Key Concepts</strong></h3><ul><li><strong><code>$1</code>, <code>$2</code>, &mldr;</strong> represent columns</li><li><strong><code>FS</code></strong> = field separator (default is whitespace)</li><li><strong><code>NR</code></strong> = record number (line number)</li><li><strong><code>NF</code></strong> = number of fields</li></ul><h3 id=example-1><strong>Example</strong></h3><p>Print 1st column:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>awk <span style=color:#e6db74>&#39;{ print $1 }&#39;</span> file.txt
</span></span></code></pre></div><hr><h1 id=3-common-use-cases><strong>3. Common Use Cases</strong></h1><hr><h2 id=31-text-substitution-sed><strong>3.1 Text Substitution (sed)</strong></h2><p>Replace all occurrences:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>sed <span style=color:#e6db74>&#39;s/old/new/g&#39;</span> file.txt
</span></span></code></pre></div><p>Replace only on line 5:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>sed <span style=color:#e6db74>&#39;5s/old/new/&#39;</span> file.txt
</span></span></code></pre></div><hr><h2 id=32-delete-lines-sed><strong>3.2 Delete Lines (sed)</strong></h2><p>Delete blank lines:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>sed <span style=color:#e6db74>&#39;/^$/d&#39;</span> file.txt
</span></span></code></pre></div><p>Delete lines containing “error”:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>sed <span style=color:#e6db74>&#39;/error/d&#39;</span> file.txt
</span></span></code></pre></div><hr><h2 id=33-insertappend-lines-sed><strong>3.3 Insert/Append Lines (sed)</strong></h2><p>Insert line before match:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>sed <span style=color:#e6db74>&#39;/match/i\
</span></span></span><span style=display:flex><span><span style=color:#e6db74>New line above&#39;</span> file.txt
</span></span></code></pre></div><p>Append line after match:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>sed <span style=color:#e6db74>&#39;/match/a\
</span></span></span><span style=display:flex><span><span style=color:#e6db74>New line below&#39;</span> file.txt
</span></span></code></pre></div><hr><h2 id=34-pattern-matching--extraction-awk><strong>3.4 Pattern Matching & Extraction (awk)</strong></h2><h3 id=extract-column><strong>Extract column</strong></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>awk <span style=color:#e6db74>&#39;{print $2}&#39;</span> file.txt
</span></span></code></pre></div><h3 id=filter-by-column-value><strong>Filter by column value</strong></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>awk <span style=color:#e6db74>&#39;$3 &gt; 100 { print $1, $3 }&#39;</span> file.txt
</span></span></code></pre></div><h3 id=sum-column-values><strong>Sum column values</strong></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>awk <span style=color:#e6db74>&#39;{sum += $2} END {print sum}&#39;</span> file.txt
</span></span></code></pre></div><hr><h2 id=35-working-with-delimiters-awk><strong>3.5 Working with Delimiters (awk)</strong></h2><p>CSV example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>awk -F<span style=color:#e6db74>&#39;,&#39;</span> <span style=color:#e6db74>&#39;{print $1, $3}&#39;</span> file.csv
</span></span></code></pre></div><hr><h1 id=4-using-sed--awk-in-bash-scripts><strong>4. Using sed & awk in Bash Scripts</strong></h1><hr><h2 id=41-sed-in-a-script><strong>4.1 sed in a Script</strong></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#!/bin/bash
</span></span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>file<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/tmp/test.txt&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Replace foo with bar</span>
</span></span><span style=display:flex><span>sed -i <span style=color:#e6db74>&#39;s/foo/bar/g&#39;</span> <span style=color:#e6db74>&#34;</span>$file<span style=color:#e6db74>&#34;</span>
</span></span></code></pre></div><hr><h2 id=42-awk-in-a-script><strong>4.2 awk in a Script</strong></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#!/bin/bash
</span></span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>file<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/tmp/data.csv&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>awk -F<span style=color:#e6db74>&#39;,&#39;</span> <span style=color:#e6db74>&#39;{ print $1, $4 }&#39;</span> <span style=color:#e6db74>&#34;</span>$file<span style=color:#e6db74>&#34;</span>
</span></span></code></pre></div><hr><h2 id=43-combined-use><strong>4.3 Combined Use</strong></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#!/bin/bash
</span></span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>log<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/var/log/syslog&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Extract lines containing &#34;error&#34;, then get timestamp and message</span>
</span></span><span style=display:flex><span>grep -i <span style=color:#e6db74>&#34;error&#34;</span> <span style=color:#e6db74>&#34;</span>$log<span style=color:#e6db74>&#34;</span> | awk <span style=color:#e6db74>&#39;{print $1, $2, $3, $5}&#39;</span>
</span></span></code></pre></div><hr><h1 id=5-best-practices><strong>5. Best Practices</strong></h1><hr><h2 id=51-write-readable-code><strong>5.1 Write Readable Code</strong></h2><ul><li>Use <code>-i.bak</code> for safe editing with backups</li><li>Use <code>-r</code> (extended regex) when needed</li><li>Keep one command per line</li></ul><hr><h2 id=52-avoid-common-pitfalls><strong>5.2 Avoid Common Pitfalls</strong></h2><h3 id=pitfall-missing-escaping><strong>Pitfall: Missing escaping</strong></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>sed <span style=color:#e6db74>&#39;s/\/home\/user/\/mnt\/data/g&#39;</span>
</span></span></code></pre></div><p>Instead use different delimiter:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>sed <span style=color:#e6db74>&#39;s#/home/user#/mnt/data#g&#39;</span>
</span></span></code></pre></div><hr><h3 id=pitfall-using><strong>Pitfall: Using <code>awk</code> for simple replacements</strong></h3><p>Use <code>sed</code> for replacements; use <code>awk</code> for structured data.</p><hr><h2 id=53-troubleshooting><strong>5.3 Troubleshooting</strong></h2><ul><li>Test with <code>echo</code> before editing files</li><li>Use <code>-n</code> with <code>p</code> to control output</li><li>Add <code>set -x</code> in scripts to debug</li></ul><hr><h1 id=6-advanced-techniques><strong>6. Advanced Techniques</strong></h1><hr><h2 id=61-regular-expressions-sed--awk><strong>6.1 Regular Expressions (sed & awk)</strong></h2><h3 id=sed-example>sed example:</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>sed -E <span style=color:#e6db74>&#39;s/[0-9]{3}-[0-9]{2}-[0-9]{4}/REDACTED/g&#39;</span> file.txt
</span></span></code></pre></div><h3 id=awk-example>awk example:</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>awk <span style=color:#e6db74>&#39;/^Error/ {print $0}&#39;</span> file.log
</span></span></code></pre></div><hr><h2 id=62-multiple-commands-sed><strong>6.2 Multiple Commands (sed)</strong></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>sed -e <span style=color:#e6db74>&#39;s/foo/bar/g&#39;</span> -e <span style=color:#e6db74>&#39;s/baz/qux/g&#39;</span> file.txt
</span></span></code></pre></div><hr><h2 id=63-multiple-patterns-awk><strong>6.3 Multiple Patterns (awk)</strong></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>awk <span style=color:#e6db74>&#39;$1 ~ /^Jan/ &amp;&amp; $3 &gt; 100 {print $0}&#39;</span> file.txt
</span></span></code></pre></div><hr><h2 id=64-processing-files-with-different-delimiters><strong>6.4 Processing Files with Different Delimiters</strong></h2><h3 id=tab-delimited>Tab-delimited:</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>awk -F<span style=color:#e6db74>&#39;\t&#39;</span> <span style=color:#e6db74>&#39;{print $1, $2}&#39;</span> file.tsv
</span></span></code></pre></div><h3 id=pipe-delimited>Pipe-delimited:</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>awk -F<span style=color:#e6db74>&#39;|&#39;</span> <span style=color:#e6db74>&#39;{print $1, $2}&#39;</span> file.psv
</span></span></code></pre></div><hr><h1 id=examples><strong>Examples</strong></h1><hr><h1 id=1-parse-system-logs-awk><strong>1. Parse System Logs (awk)</strong></h1><h3 id=example-extract-ssh-login-failures><strong>Example: Extract SSH login failures</strong></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>awk <span style=color:#e6db74>&#39;/Failed password/ {print $1, $2, $3, $11, $13}&#39;</span> /var/log/auth.log
</span></span></code></pre></div><p><strong>What it does:</strong></p><ul><li>Finds lines containing <code>Failed password</code></li><li>Prints <strong>timestamp</strong>, <strong>user</strong>, and <strong>source IP</strong></li></ul><hr><h3 id=example-count-failed-login-attempts-per-ip><strong>Example: Count failed login attempts per IP</strong></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>awk <span style=color:#e6db74>&#39;/Failed password/ {print $11}&#39;</span> /var/log/auth.log | sort | uniq -c | sort -nr
</span></span></code></pre></div><hr><h1 id=2-generate-reports-from-csv-awk><strong>2. Generate Reports from CSV (awk)</strong></h1><h3 id=example-sum-total-sales-from-csv><strong>Example: Sum total sales from CSV</strong></h3><p>Assuming a file <code>sales.csv</code>:</p><pre tabindex=0><code>date,product,quantity,price
2025-01-01,Widget,10,9.99
2025-01-02,Gadget,5,14.99
</code></pre><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>awk -F<span style=color:#e6db74>&#39;,&#39;</span> <span style=color:#e6db74>&#39;NR&gt;1 {total += $3 * $4} END {print &#34;Total Revenue:&#34;, total}&#39;</span> sales.csv
</span></span></code></pre></div><hr><h1 id=3-replace-configuration-values-sed><strong>3. Replace Configuration Values (sed)</strong></h1><h3 id=example-change-a-port-in-nginx-config><strong>Example: Change a port in Nginx config</strong></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>sed -i <span style=color:#e6db74>&#39;s/listen 80;/listen 8080;/&#39;</span> /etc/nginx/sites-available/default
</span></span></code></pre></div><hr><h3 id=example-update-a-version-in-a-yaml-file><strong>Example: Update a version in a YAML file</strong></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>sed -i <span style=color:#e6db74>&#39;s/version: 1.0.0/version: 1.0.1/&#39;</span> app-config.yaml
</span></span></code></pre></div><hr><h1 id=4-extract-columns-from-command-output-awk><strong>4. Extract Columns from Command Output (awk)</strong></h1><h3 id=example-show-disk-usage-for-root-partition><strong>Example: Show disk usage for root partition</strong></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>df -h | awk <span style=color:#e6db74>&#39;$NF==&#34;/&#34; {print $1, $2, $3, $5}&#39;</span>
</span></span></code></pre></div><hr><h3 id=example-show-memory-usage><strong>Example: Show memory usage</strong></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>free -m | awk <span style=color:#e6db74>&#39;/Mem:/ {print &#34;Used:&#34;, $3, &#34;Free:&#34;, $4, &#34;Total:&#34;, $2}&#39;</span>
</span></span></code></pre></div><hr><h1 id=5-clean--format-output-sed><strong>5. Clean & Format Output (sed)</strong></h1><h3 id=example-remove-extra-spaces><strong>Example: Remove extra spaces</strong></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>sed -i <span style=color:#e6db74>&#39;s/  */ /g&#39;</span> file.txt
</span></span></code></pre></div><hr><h3 id=example-convert-windows-crlf-to-unix-lf><strong>Example: Convert Windows CRLF to Unix LF</strong></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>sed -i <span style=color:#e6db74>&#39;s/\r$//&#39;</span> file.txt
</span></span></code></pre></div><hr><h1 id=6-extract-json-like-data-awk--sed><strong>6. Extract JSON-like Data (awk + sed)</strong></h1><h3 id=example-extract-values-from-a-simple-json-line><strong>Example: Extract values from a simple JSON line</strong></h3><pre tabindex=0><code>{&#34;user&#34;:&#34;admin&#34;,&#34;status&#34;:&#34;ok&#34;,&#34;id&#34;:123}
</code></pre><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>echo <span style=color:#e6db74>&#39;{&#34;user&#34;:&#34;admin&#34;,&#34;status&#34;:&#34;ok&#34;,&#34;id&#34;:123}&#39;</span> | sed <span style=color:#e6db74>&#39;s/[{},&#34;]//g&#39;</span> | awk -F: <span style=color:#e6db74>&#39;{print $1, $2}&#39;</span>
</span></span></code></pre></div><hr><h1 id=7-batch-file-editing-sed><strong>7. Batch File Editing (sed)</strong></h1><h3 id=example-replace-multiple-strings-across-many-files><strong>Example: Replace multiple strings across many files</strong></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>find /etc/nginx -type f -name <span style=color:#e6db74>&#39;*.conf&#39;</span> -exec sed -i <span style=color:#e6db74>&#39;s/old-domain.com/new-domain.com/g&#39;</span> <span style=color:#f92672>{}</span> <span style=color:#ae81ff>\;</span>
</span></span></code></pre></div><hr><h1 id=8-extract-and-count-unique-entries-awk><strong>8. Extract and Count Unique Entries (awk)</strong></h1><h3 id=example-count-unique-users-in-auth-log><strong>Example: Count unique users in auth log</strong></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>awk <span style=color:#e6db74>&#39;/session opened/ {print $9}&#39;</span> /var/log/auth.log | sort | uniq -c | sort -nr
</span></span></code></pre></div><hr><h1 id=9-convert-delimited-files-awk><strong>9. Convert Delimited Files (awk)</strong></h1><h3 id=example-convert-csv--tsv><strong>Example: Convert CSV → TSV</strong></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>awk -F<span style=color:#e6db74>&#39;,&#39;</span> <span style=color:#e6db74>&#39;BEGIN {OFS=&#34;\t&#34;} {print $1,$2,$3,$4}&#39;</span> file.csv &gt; file.tsv
</span></span></code></pre></div><hr><h1 id=10-automated-server-hardening-example-sed--awk><strong>10. Automated Server Hardening Example (sed + awk)</strong></h1><h3 id=example-disable-password-authentication-in-ssh><strong>Example: Disable password authentication in SSH</strong></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>sed -i <span style=color:#e6db74>&#39;s/^#PasswordAuthentication yes/PasswordAuthentication no/&#39;</span> /etc/ssh/sshd_config
</span></span><span style=display:flex><span>systemctl restart sshd
</span></span></code></pre></div><hr><h1 id=script-using-both-sed--awk>Script Using Both sed + awk</h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#!/bin/bash
</span></span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Get top 5 processes by memory</span>
</span></span><span style=display:flex><span>ps aux --sort<span style=color:#f92672>=</span>-%mem | awk <span style=color:#e6db74>&#39;NR&lt;=6 {print $1, $2, $4, $11}&#39;</span> &gt; /tmp/top_mem.txt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Clean output spacing</span>
</span></span><span style=display:flex><span>sed -i <span style=color:#e6db74>&#39;s/  */ /g&#39;</span> /tmp/top_mem.txt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>cat /tmp/top_mem.txt
</span></span></code></pre></div></div></div><script src=/assets/shared-nav.js></script></body></html>