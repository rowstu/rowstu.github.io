<!doctype html><html lang=en-us><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>CI/CD Best Practices // rowstu.net</title><link rel=stylesheet href=/assets/shared-theme.css><style>.markdown-content{max-width:900px;margin:0 auto;line-height:1.7}.markdown-content h1{font-size:2.5rem;margin-bottom:1rem;color:var(--accent-teal);border-bottom:2px solid var(--border);padding-bottom:.5rem}.markdown-content h2{font-size:2rem;margin-top:2rem;margin-bottom:1rem;color:var(--accent-orange)}.markdown-content h3{font-size:1.5rem;margin-top:1.5rem;margin-bottom:.75rem;color:var(--text-primary)}.markdown-content p{margin-bottom:1rem}.markdown-content code{background:var(--bg-light);padding:.2rem .4rem;border-radius:3px;font-family:jetbrains mono,monospace;font-size:.9em}.markdown-content pre{background:var(--bg-light);padding:1rem;border-radius:6px;overflow-x:auto;margin-bottom:1rem}.markdown-content pre code{background:0 0;padding:0}.markdown-content a{color:var(--accent-teal);text-decoration:none}.markdown-content a:hover{text-decoration:underline}.markdown-content ul,.markdown-content ol{margin-bottom:1rem;padding-left:2rem}.markdown-content li{margin-bottom:.5rem}.markdown-content blockquote{border-left:4px solid var(--accent-teal);padding-left:1rem;margin:1rem 0;color:var(--text-secondary);font-style:italic}.markdown-content table{width:100%;border-collapse:collapse;margin-bottom:1rem}.markdown-content th,.markdown-content td{border:1px solid var(--border);padding:.75rem;text-align:left}.markdown-content th{background:var(--bg-light);font-weight:600}.breadcrumb{padding:1rem 0;color:var(--text-secondary);font-size:.95rem}.breadcrumb a{color:var(--accent-teal);text-decoration:none}.breadcrumb a:hover{text-decoration:underline}</style></head><body><div class=app-header><h1 class=app-title>CI/CD Best Practices</h1></div><div class=container><div class=breadcrumb><a href=/>Home</a> / <a href=/browse/>Browse</a>/ <a href=/devopsci-cd/>Devopsci Cd</a></div><div class="card markdown-content"><h1 id=cicd-best-practices>CI/CD Best Practices</h1><p>Continuous Integration and Continuous Delivery/Deployment practices for reliable software delivery.</p><hr><h2 id=continuous-integration>Continuous Integration</h2><h3 id=commit-frequently>Commit Frequently</h3><pre tabindex=0><code>Good:  Multiple small commits per day
Bad:   One large commit per week
</code></pre><ul><li>Commit at least daily</li><li>Small, focused commits</li><li>Each commit should be complete and working</li><li>Avoid long-lived branches</li></ul><h3 id=maintain-a-single-source-of-truth>Maintain a Single Source of Truth</h3><ul><li>One main branch (main/master)</li><li>All code lives in version control</li><li>Configuration in version control</li><li>Infrastructure as Code in version control</li></ul><h3 id=automated-build-on-every-commit>Automated Build on Every Commit</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#75715e># Example: GitHub Actions</span>
</span></span><span style=display:flex><span><span style=color:#f92672>on</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>push</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>branches</span>: [<span style=color:#ae81ff>main]</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>pull_request</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>branches</span>: [<span style=color:#ae81ff>main]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>jobs</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>build</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>runs-on</span>: <span style=color:#ae81ff>ubuntu-latest</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>steps</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/checkout@v4</span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Build</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>run</span>: <span style=color:#ae81ff>make build</span>
</span></span></code></pre></div><h3 id=fix-broken-builds-immediately>Fix Broken Builds Immediately</h3><ul><li>Broken build = top priority</li><li>Don&rsquo;t commit on a broken build</li><li>Revert if can&rsquo;t fix quickly</li><li>Build status visible to all</li></ul><h3 id=keep-the-build-fast>Keep the Build Fast</h3><table><thead><tr><th>Build Stage</th><th>Target Time</th></tr></thead><tbody><tr><td>Unit tests</td><td>&lt; 5 minutes</td></tr><tr><td>Full CI pipeline</td><td>&lt; 10 minutes</td></tr><tr><td>Integration tests</td><td>&lt; 20 minutes</td></tr></tbody></table><ul><li>Parallelise tests</li><li>Use caching</li><li>Optimise slow tests</li><li>Consider test splitting</li></ul><hr><h2 id=continuous-delivery-pipeline>Continuous Delivery Pipeline</h2><h3 id=pipeline-stages>Pipeline Stages</h3><pre tabindex=0><code>┌─────────┐   ┌──────┐   ┌──────────┐   ┌─────────┐   ┌────────────┐
│  Build  │ → │ Test │ → │ Security │ → │ Package │ → │   Deploy   │
└─────────┘   └──────┘   └──────────┘   └─────────┘   └────────────┘
                                                            │
                                        ┌───────────────────┼───────────────────┐
                                        ▼                   ▼                   ▼
                                   ┌─────────┐        ┌─────────┐        ┌─────────┐
                                   │   Dev   │   →    │ Staging │   →    │  Prod   │
                                   └─────────┘        └─────────┘        └─────────┘
</code></pre><h3 id=build-stage>Build Stage</h3><ul><li>Compile code</li><li>Generate artefacts</li><li>Create container images</li><li>Tag with version/commit SHA</li></ul><h3 id=test-stage>Test Stage</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>tests</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>unit</span>:
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>Fast, isolated tests</span>
</span></span><span style=display:flex><span>    - <span style=color:#66d9ef>No</span> <span style=color:#ae81ff>external dependencies</span>
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>Run on every commit</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>integration</span>:
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>Test component interactions</span>
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>May use test doubles</span>
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>Run on every commit</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>e2e</span>:
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>Full system tests</span>
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>Real dependencies</span>
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>Run before deployment</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>performance</span>:
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>Load tests</span>
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>Baseline comparisons</span>
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>Run periodically or before release</span>
</span></span></code></pre></div><h3 id=security-stage>Security Stage</h3><ul><li>Static Application Security Testing (SAST)</li><li>Dependency vulnerability scanning</li><li>Container image scanning</li><li>Secrets detection</li></ul><h3 id=package-stage>Package Stage</h3><ul><li>Build immutable artefacts</li><li>Version everything</li><li>Store in artefact repository</li><li>Sign artefacts</li></ul><h3 id=deploy-stage>Deploy Stage</h3><ul><li>Deploy to each environment identically</li><li>Environment-specific config only</li><li>Automated smoke tests</li><li>Automated rollback capability</li></ul><hr><h2 id=deployment-strategies>Deployment Strategies</h2><h3 id=rolling-deployment>Rolling Deployment</h3><pre tabindex=0><code>Before:  [v1] [v1] [v1] [v1]
During:  [v2] [v1] [v1] [v1]
During:  [v2] [v2] [v1] [v1]
During:  [v2] [v2] [v2] [v1]
After:   [v2] [v2] [v2] [v2]
</code></pre><ul><li>Gradual replacement</li><li>No downtime</li><li>Easy rollback</li><li>Mixed versions during deployment</li></ul><h3 id=blue-green-deployment>Blue-Green Deployment</h3><pre tabindex=0><code>         ┌─────────────────┐
         │  Load Balancer  │
         └────────┬────────┘
                  │
        ┌─────────┴─────────┐
        ▼                   ▼
   ┌─────────┐         ┌─────────┐
   │  Blue   │         │  Green  │
   │  (v1)   │         │  (v2)   │
   │ ACTIVE  │         │  IDLE   │
   └─────────┘         └─────────┘
</code></pre><ul><li>Two identical environments</li><li>Switch traffic instantly</li><li>Easy rollback (switch back)</li><li>Requires double resources</li></ul><h3 id=canary-deployment>Canary Deployment</h3><pre tabindex=0><code>Traffic Split:
├── 95% → v1 (stable)
└──  5% → v2 (canary)

If healthy, gradually increase:
├── 90% → v1
└── 10% → v2
...
├── 0%  → v1
└── 100% → v2
</code></pre><ul><li>Gradual traffic shift</li><li>Real user testing</li><li>Fast rollback</li><li>Requires good monitoring</li></ul><h3 id=feature-flags>Feature Flags</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>if</span> feature_flags<span style=color:#f92672>.</span>is_enabled(<span style=color:#e6db74>&#34;new_checkout&#34;</span>):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> new_checkout_flow()
</span></span><span style=display:flex><span><span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> old_checkout_flow()
</span></span></code></pre></div><ul><li>Decouple deployment from release</li><li>A/B testing</li><li>Gradual rollout</li><li>Kill switch for features</li></ul><hr><h2 id=pipeline-best-practices>Pipeline Best Practices</h2><h3 id=pipeline-as-code>Pipeline as Code</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#75715e># .gitlab-ci.yml or Jenkinsfile or .github/workflows/</span>
</span></span><span style=display:flex><span><span style=color:#f92672>stages</span>:
</span></span><span style=display:flex><span>  - <span style=color:#ae81ff>build</span>
</span></span><span style=display:flex><span>  - <span style=color:#ae81ff>test</span>
</span></span><span style=display:flex><span>  - <span style=color:#ae81ff>security</span>
</span></span><span style=display:flex><span>  - <span style=color:#ae81ff>deploy</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>build</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>stage</span>: <span style=color:#ae81ff>build</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>script</span>:
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>docker build -t app:$CI_COMMIT_SHA .</span>
</span></span></code></pre></div><ul><li>Version controlled</li><li>Peer reviewed</li><li>Auditable</li><li>Reproducible</li></ul><h3 id=fail-fast>Fail Fast</h3><ul><li>Run fastest tests first</li><li>Fail on first error</li><li>Parallelise independent jobs</li><li>Cache dependencies</li></ul><h3 id=environment-parity>Environment Parity</h3><table><thead><tr><th>Environment</th><th>Purpose</th><th>Data</th><th>Config</th></tr></thead><tbody><tr><td>Dev</td><td>Development</td><td>Synthetic</td><td>Dev</td></tr><tr><td>Test</td><td>Testing</td><td>Synthetic</td><td>Test</td></tr><tr><td>Staging</td><td>Pre-prod</td><td>Anonymised prod</td><td>Prod-like</td></tr><tr><td>Prod</td><td>Production</td><td>Real</td><td>Prod</td></tr></tbody></table><ul><li>Same deployment process everywhere</li><li>Same artefacts everywhere</li><li>Only config differs</li></ul><h3 id=artefact-promotion>Artefact Promotion</h3><pre tabindex=0><code>Build Once, Deploy Many:

┌─────────┐     ┌─────────┐     ┌─────────┐     ┌─────────┐
│  Build  │ ──▶ │   Dev   │ ──▶ │ Staging │ ──▶ │  Prod   │
│ app:abc │     │ app:abc │     │ app:abc │     │ app:abc │
└─────────┘     └─────────┘     └─────────┘     └─────────┘
                    Same artefact promoted through environments
</code></pre><ul><li>Build once, deploy many times</li><li>Artefacts are immutable</li><li>Configuration is external</li><li>Promotes tested code</li></ul><h3 id=secrets-management>Secrets Management</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#75715e># Bad</span>
</span></span><span style=display:flex><span><span style=color:#f92672>database_password</span>: <span style=color:#e6db74>&#34;secret123&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Good</span>
</span></span><span style=display:flex><span><span style=color:#f92672>database_password</span>: <span style=color:#ae81ff>${VAULT_DB_PASSWORD}</span>
</span></span></code></pre></div><ul><li>Never commit secrets</li><li>Use secrets management (Vault, AWS Secrets Manager)</li><li>Rotate secrets regularly</li><li>Audit secret access</li></ul><hr><h2 id=testing-pyramid>Testing Pyramid</h2><pre tabindex=0><code>                    /\
                   /  \
                  / E2E\        Few, slow, expensive
                 /──────\
                /        \
               /Integration\   Some, moderate
              /──────────────\
             /                \
            /    Unit Tests    \  Many, fast, cheap
           /────────────────────\
</code></pre><h3 id=unit-tests>Unit Tests</h3><ul><li>Test single units in isolation</li><li>Fast (milliseconds)</li><li>No external dependencies</li><li>High coverage</li></ul><h3 id=integration-tests>Integration Tests</h3><ul><li>Test component interactions</li><li>Moderate speed</li><li>May use test containers</li><li>Focus on boundaries</li></ul><h3 id=end-to-end-tests>End-to-End Tests</h3><ul><li>Test complete workflows</li><li>Slow (seconds to minutes)</li><li>Real or near-real dependencies</li><li>Critical paths only</li></ul><hr><h2 id=monitoring-and-feedback>Monitoring and Feedback</h2><h3 id=pipeline-metrics>Pipeline Metrics</h3><ul><li>Build duration</li><li>Build success rate</li><li>Test coverage</li><li>Deployment frequency</li></ul><h3 id=deployment-metrics>Deployment Metrics</h3><ul><li>Deployment duration</li><li>Deployment success rate</li><li>Rollback frequency</li><li>Time to recovery</li></ul><h3 id=alerting>Alerting</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>alerts</span>:
</span></span><span style=display:flex><span>  - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>DeploymentFailed</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>condition</span>: <span style=color:#ae81ff>deployment_status == &#34;failed&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>notify</span>: [<span style=color:#ae81ff>slack, pagerduty]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>PipelineSlow</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>condition</span>: <span style=color:#ae81ff>pipeline_duration &gt; 15m</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>notify</span>: [<span style=color:#ae81ff>slack]</span>
</span></span></code></pre></div><hr><h2 id=quick-reference>Quick Reference</h2><pre tabindex=0><code>CI Checklist:
□ Single source repository
□ Automated build
□ Automated tests
□ Fast feedback (&lt; 10 min)
□ Fix broken builds immediately
□ All tests pass before merge

CD Checklist:
□ Pipeline as code
□ Environment parity
□ Automated deployments
□ Artefact promotion
□ Secrets management
□ Rollback capability
□ Monitoring and alerting
</code></pre></div></div><script src=/assets/shared-nav.js></script></body></html>